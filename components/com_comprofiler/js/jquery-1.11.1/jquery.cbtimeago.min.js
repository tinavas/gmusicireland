!function(e){var t=[],a={init:function(a){return this.each(function(){var n=this,i=e(n).data("cbtimeago");if(!i&&(i={},i.options=a,i.defaults=e.fn.cbtimeago.defaults,i.settings=e.extend(!0,{},i.defaults,i.options),i.element=e(n),i.datetime=i.element.data("cbtimeago-datetime"),i.datetime||(i.datetime=i.element.attr("title"),i.datetime||(i.datetime=i.element.text())),i.settings.useData&&e.each(i.defaults,function(e){if("init"!=e&&"useData"!=e){var t=i.element.data("cbtimeago"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?i.settings[e]=t:(t=i.element.data("cbtimeago"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(i.settings[e]=t))}}),i.element.triggerHandler("cbtimeago.init.before",[i]),i.settings.init)){i.settings.hideAgo&&(i.settings.strings.future="%s",i.settings.strings.past="%s");var s=null;"undefined"!=typeof moment&&(s=moment.locale(),moment.locale(Math.random(),{relativeTime:{future:i.settings.strings.future,past:i.settings.strings.past,s:i.settings.strings.seconds,m:i.settings.strings.minute,mm:i.settings.strings.minutes,h:i.settings.strings.hour,hh:i.settings.strings.hours,d:i.settings.strings.day,dd:i.settings.strings.days,M:i.settings.strings.month,MM:i.settings.strings.months,y:i.settings.strings.year,yy:i.settings.strings.years}})),i.livestamp=i.element.livestamp(i.datetime),s&&moment.locale(s),i.element.on("modified.cbtimeago",function(e,t,a){t!=a&&(i.element.cbtimeago("destroy"),i.element.cbtimeago(i.options))}),i.element.on("cloned.cbtimeago",function(){e(this).off("cloned.cbtimeago"),e(this).off("modified.cbtimeago"),e(this).removeData("cbtimeago"),e(this).removeData("livestampdata"),e(this).text(""),e(this).data("cbtimeago-datetime")||e(this).attr("title")||e(this).text(i.datetime),e(this).cbtimeago(i.options)}),i.element.triggerHandler("cbtimeago.init.after",[i]),i.element.data("cbtimeago",i),t.push(i)}})},destroy:function(){var a=e(this).data("cbtimeago");return a?(a.element.livestamp("destroy"),a.element.off("cloned.cbtimeago"),a.element.off("modified.cbtimeago"),e.each(t,function(e,n){return n.element==a.element?(t.splice(e,1),!1):!0}),a.element.text(""),a.element.data("cbtimeago-datetime")||a.element.attr("title")||a.element.text(a.datetime),a.element.removeData("cbtimeago"),a.element.triggerHandler("cbtimeago.destroyed",[a]),!0):!1},instances:function(){return t}};e.fn.cbtimeago=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:a.init.apply(this,arguments)},e.fn.cbtimeago.defaults={init:!0,useData:!0,hideAgo:!1,strings:{future:"in %s",past:"%s ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"}}}(jQuery);