!function(e){function t(t){if(!t)return null;var a=e(this).data("cbtabs");if(!a)return null;var n=null;return e.each(a.tabs,function(e,a){return t==a.tabNav.text()||t==a.tabNav.attr("id")||t==a.tabPane.attr("id")||"cbtabnav"+t==a.tabNav.attr("id")||"cbtabpane"+t==a.tabPane.attr("id")?(n=a,!1):!0}),n}function a(t,a){if(!t)return!1;var n=e(this).data("cbtabs");if(!n)return!1;var i=!1;return"undefined"==typeof a&&(a=!0),t&&(t.tabNav.hasClass("disabled")||(i=!0,t.tabNav.children("a").trigger("click",[!0]),a&&t.tabNav.parents(".cbTabPane").each(function(){e("#"+e(this).attr("id").replace(/cbtabpane/,"cbtabnav")).children("a").trigger("click",[!0])}))),i}function n(t){if(!t)return!1;var a=e(this).data("cbtabs");if(!a)return!1;var n=!1;if(t){if(n=!0,t.tabNav.addClass("disabled"),t.tabPane.addClass("disabled"),a.settings.stepByStep){a.tabPanes.find(".cbTabNavPrevious.hidden").removeClass("hidden"),a.tabPanes.find(".cbTabNavNext.hidden").removeClass("hidden"),a.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var i=a.element.closest("form"),s=a.tabPanes.not(".disabled").last().find(".cbTabNavNext");if(s.addClass("hidden"),i.length){var r=i.find('input[type="submit"]:first');r.appendTo(s.parent())}}t.tabNav.hasClass("active")&&a.tabNavs.not(".disabled").first().children("a").trigger("click",[!0]),e(this).triggerHandler("cbtabs.disable",[a,t])}return n}function i(t){if(!t)return!1;var a=e(this).data("cbtabs");if(!a)return!1;var n=!1;if(t){if(n=!0,t.tabNav.removeClass("disabled"),t.tabPane.removeClass("disabled"),a.settings.stepByStep){a.tabPanes.find(".cbTabNavPrevious.hidden").removeClass("hidden"),a.tabPanes.find(".cbTabNavNext.hidden").removeClass("hidden"),a.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var i=a.element.closest("form"),s=a.tabPanes.not(".disabled").last().find(".cbTabNavNext");if(s.addClass("hidden"),i.length){var r=i.find('input[type="submit"]:first');r.appendTo(s.parent())}}e(this).triggerHandler("cbtabs.enable",[a,t])}return n}function s(t){if(!t)return!1;var a=e(this).data("cbtabs");return a?n.call(this,t)?(t.tabNav.addClass("hidden"),e(this).triggerHandler("cbtabs.hide",[a,t]),!0):!1:!1}function r(t){if(!t)return!1;var a=e(this).data("cbtabs");return a?i.call(this,t)?(t.tabNav.removeClass("hidden"),e(this).triggerHandler("cbtabs.show",[a,t]),!0):!1:!1}var l=[],c={init:function(n){return this.each(function(){var i=this,s=e(i).data("cbtabs");if(!s&&(s={},s.options=n,s.defaults=e.fn.cbtabs.defaults,s.settings=e.extend(!0,{},s.defaults,s.options),s.element=e(i),s.tabs=[],s.settings.useData&&e.each(s.defaults,function(e){if("init"!=e&&"useData"!=e){var t=s.element.data("cbtabs"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?s.settings[e]=t:(t=s.element.data("cbtabs"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(s.settings[e]=t))}}),s.element.triggerHandler("cbtabs.init.before",[s]),s.settings.init)){var r=null;if(s.settings.useCookies&&(r=document.cookie.match(new RegExp(s.element.attr("id")+"=([^;]+)"))),s.tabsNav=s.element.find(".cbTabsNav:first"),s.tabsContent=s.element.find(".cbTabsContent:first"),s.tabPanes=s.tabsContent.children(".cbTabPane"),s.tabNavs=s.tabPanes.children(".cbTabNav"),s.tabNavsPrevious=s.tabPanes.find(".cbTabNavPrevious"),s.tabNavsNext=s.tabPanes.find(".cbTabNavNext"),s.tabNavs.each(function(t){var a=e(e(this)[0].outerHTML.replace(/h2/,"li")).appendTo(s.tabsNav),n=e(this).parent(),i={tabNav:a,tabPane:n,tabIndex:t+1};s.tabs.push(i),e(this).remove(),a.children("a").on("click",function(e,t,r){if(e.preventDefault(),"undefined"==typeof r&&(r=e),!(a.hasClass("disabled")||s.settings.stepByStep&&t!==!0)){if(s.tabNavs.removeClass("active"),s.tabPanes.removeClass("active"),a.addClass("active"),n.addClass("active"),s.settings.useCookies){var l=new Date;l.setTime(l.getTime()+864e5),document.cookie=s.element.attr("id")+"="+a.attr("id")+"; expires="+l.toGMTString()+"; path=/"}s.element.triggerHandler("cbtabs.selected",[r,s,i])}}),""==e.trim(n.html())&&(i.tabNav.addClass("disabled hidden").removeClass("active"),i.tabPane.addClass("disabled hidden").removeClass("active"))}),s.tabNavs=s.tabsNav.children(".cbTabNav"),!s.tabNavs.length||s.tabNavs.filter(".disabled").length==s.tabNavs.length){var c=s.element.parent();c.hasClass("cbTabPane")&&(s.element.siblings().length||c.closest(".cbTabs").cbtabs("hide",c.attr("id")))}if(s.prevHandler=function(a){a.preventDefault();var n=e(this).closest(".cbTabPane"),r=t.call(i,n.attr("id"));if(r){var l=r.tabNav.prevAll(":not(.disabled)").first();l.length||(l=r.tabNav.nextAll(":not(.disabled)").last()),l.length&&(l.children("a").trigger("click",[!0,a]),l[0].scrollIntoView(),s.element.triggerHandler("cbtabs.previous",[a,s,r,t.call(i,l.attr("id"))]))}},s.tabNavsPrevious.on("click",s.prevHandler),s.nextHandler=function(a){a.preventDefault();var n=e(this).closest(".cbTabPane"),r=t.call(i,n.attr("id"));if(r){var l=r.tabNav.nextAll(":not(.disabled)").first();if(l.length||(l=r.tabNav.prevAll(":not(.disabled)").last()),l.length){var c=s.element.closest("form");if(c.length){var o=c.data("cbvalidate");if(o&&!o.element.cbvalidate("validate",n,!0))return}l.children("a").trigger("click",[!0,a]),l[0].scrollIntoView(),s.element.triggerHandler("cbtabs.next",[a,s,r,t.call(i,l.attr("id"))])}}},s.tabNavsNext.on("click",s.nextHandler),s.settings.stepByStep){s.tabPanes.not(".disabled").first().find(".cbTabNavPrevious").addClass("hidden");var o=s.element.closest("form"),d=s.tabPanes.not(".disabled").last().find(".cbTabNavNext");if(d.addClass("hidden"),o.length){var f=o.find('input[type="submit"]:first');f.appendTo(d.parent())}}s.element.on("modified.cbtabs",function(e,t,a){t!=a&&(s.element.cbtabs("destroy"),s.element.cbtabs(s.options))}),s.element.bind("cloned.cbtabs",function(){e(this).off("cloned.cbtabs"),e(this).off("modified.cbtabs"),e(this).removeData("cbtabs");var t=e(this).find(".cbTabsNav:first"),a=e(this).find(".cbTabsContent:first"),n=a.children(".cbTabPane"),i=t.children(".cbTabNav"),r=n.find(".cbTabNavPrevious"),l=n.find(".cbTabNavNext");i.each(function(){var t=e(this).children("a").attr("href");e(this).removeClass("disabled hidden active"),e(e(this)[0].outerHTML.replace(/li/,"h2")).prependTo(a.find(t)),e(this).remove()}),r.off("click",s.prevHandler),l.off("click",s.nextHandler),e(this).cbtabs(s.options)}),s.element.triggerHandler("cbtabs.init.after",[s]),s.element.data("cbtabs",s),l.push(s),r&&a.call(i,t.call(i,r[1]),!1),s.settings.tabSelected&&a.call(i,t.call(i,s.settings.tabSelected)),s.tabNavs.is(".active")||s.tabNavs.not(".disabled").first().children("a").trigger("click",[!0])}})},selected:function(){var t=e(this).data("cbtabs");if(!t)return!1;var a=!1;return e.each(t.tabs,function(e,t){t.tabNav.hasClass("active")&&(a=t)}),a},select:function(e){return"undefined"==typeof e&&(e=null),a.call(this,t.call(this,e))},disable:function(e){return"undefined"==typeof e&&(e=null),n.call(this,t.call(this,e))},enable:function(e){return"undefined"==typeof e&&(e=null),i.call(this,t.call(this,e))},hide:function(e){return"undefined"==typeof e&&(e=null),s.call(this,t.call(this,e))},show:function(e){return"undefined"==typeof e&&(e=null),r.call(this,t.call(this,e))},destroy:function(){var t=e(this).data("cbtabs");return t?(e.each(t.tabs,function(t,a){a.tabNav.removeClass("disabled hidden active"),a.tabPane.removeClass("disabled hidden active"),e(a.tabNav[0].outerHTML.replace(/li/,"h2")).prependTo(a.tabPane),a.tabNav.remove()}),t.tabNavsPrevious.off("click",t.prevHandler),t.tabNavsNext.off("click",t.nextHandler),t.element.off("cloned.cbtabs"),t.element.off("modified.cbtabs"),e.each(l,function(e,a){return a.element==t.element?(l.splice(e,1),!1):!0}),t.element.removeData("cbtabs"),t.element.triggerHandler("cbtabs.destroyed",[t]),!0):!1},instances:function(){return l}};e.fn.cbtabs=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:c.init.apply(this,arguments)},e.fn.cbtabs.defaults={init:!0,useData:!0,useCookies:!0,stepByStep:!1,tabSelected:null},e(document).on("click",".cbTabNavExternal",function(n){n.preventDefault();var i=e(this).data("tab");"undefined"!=typeof i&&e.each(l,function(e,n){var s=t.call(n.element[0],i);return s?(a.call(n.element[0],s),!1):!0})})}(jQuery);