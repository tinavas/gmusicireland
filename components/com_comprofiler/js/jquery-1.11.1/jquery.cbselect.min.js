!function(e){function t(t){var n=t.container.offset().top+t.container.outerHeight(!1)+t.dropdown.outerHeight(!1)<=e(window).scrollTop()+e(window).height(),l=t.container.offset().top-t.dropdown.outerHeight(!1)>=e(window).scrollTop(),s=null;s=t.dropdown.is(".top")?!(!l&&n):!n&&l,s?t.dropdown.css({top:t.container.offset().top-t.dropdown.outerHeight(!1),left:t.container.offset().left,bottom:"auto"}).removeClass("bottom").addClass("top"):t.dropdown.css({top:t.container.offset().top+t.container.outerHeight(!1),left:t.container.offset().left,bottom:"auto"}).removeClass("top").addClass("bottom")}var n=[],l={init:function(l){return this.each(function(){var s=this,i=e(s).data("cbselect");if(!i){if(i={},i.type=!e(s).prop("multiple")&&"multipleselect"!=e(this).data("cbselect-type")||"undefined"!=typeof e(this).data("cbselect-tags")?"select2":"multipleselect",i.options=l,i.defaults=e.extend(!0,{},e.fn.cbselect.defaults,"multipleselect"==i.type?e.fn.cbselect.defaults.multipleselect:e.fn.cbselect.defaults.select2),i.settings=e.extend(!0,{},i.defaults,i.options),i.element=e(s),i.settings.useData){var o=e.extend(!0,{},"multipleselect"==i.type?e.fn.multipleSelect.defaults:e.fn.select2.defaults,i.defaults);e.each(o,function(e){if("init"!=e&&"useData"!=e){var t=i.element.data("cbselect"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?i.settings[e]=t:(t=i.element.data("cbselect"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(i.settings[e]=t))}})}if(i.element.triggerHandler("cbselect.init.before",[i]),i.settings.init){var c=i.element.data("cbselect-tags");if("undefined"!=typeof c){i.type="select2";var a=i.element.data("cbselect-tags-separators");"undefined"==typeof a&&(a=[","]),"calculate"==i.settings.width&&(i.settings.width="auto"),"calculate"==i.settings.height&&(i.settings.height="auto"),i.settings.tags=c,i.settings.tokenSeparators=a,i.settings.containerCssClass="undefined"==typeof i.settings.containerCssClass?"select2-container-tag":i.settings.containerCssClass+" select2-container-tag"}var r=null,d=null;if("calculate"==i.settings.width||"calculate"==i.settings.height){if(r=i.element.outerWidth()+50,d=i.element.outerHeight(),i.element.is(":hidden")){var m=i.element.css("width"),u=i.element.css("height"),p=i.element.clone(!1).attr({id:"","class":""}).css({position:"absolute",display:"block",visibility:"hidden",width:"auto",height:"auto",minWidth:m&&"0px"!=m?m:"auto",minHeight:u&&"0px"!=u?u:"auto",padding:i.element.css("padding"),border:i.element.css("border"),margin:i.element.css("margin"),fontFamily:i.element.css("font-family"),fontSize:i.element.css("font-size"),fontWeight:i.element.css("font-weight"),lineHeight:i.element.css("line-height"),boxSizing:i.element.css("box-sizing"),wordSpacing:i.element.css("word-spacing")}).appendTo("body");r=p.outerWidth()+50,d=p.outerHeight(),p.remove()}"calculate"==i.settings.width&&(i.settings.width=r),"calculate"==i.settings.height&&(i.settings.height=d)}"element"==i.settings.width?(r=i.element.outerWidth(),r&&"0px"!=r||(r="auto")):"copy"==i.settings.width||"resolve"==i.settings.width?(r=i.element.css("width"),r&&"0px"!=r||(r="auto")):"off"==i.settings.width?r=null:r||(r=i.settings.width),"element"==i.settings.height?(d=i.element.outerHeight(),d&&"0px"!=d||(d="auto")):"copy"==i.settings.height||"resolve"==i.settings.height?(d=i.element.css("height"),d&&"0px"!=d||(d="auto")):"off"==i.settings.height?d=null:d||(d=i.settings.height);var g=i.element.hasClass("cbTooltip")||"true"==i.element.data("hascbtooltip");if("multipleselect"==i.type){g&&(i.element.attr("data-cbtooltip-open-target","#msid_"+i.element.attr("id")),i.element.attr("data-cbtooltip-close-target","#msid_"+i.element.attr("id")),i.element.attr("data-cbtooltip-position-target","#msid_"+i.element.attr("id"))),i.settings.onOpen=function(){i.container.addClass("ms-parent-active"),t(i),i.dropdown.find(".ms-search > input").focus(),i.element.triggerHandler("cbselect.open",[i])},i.settings.onClose=function(){i.container.removeClass("ms-parent-active"),i.element.triggerHandler("cbselect.close",[i])},i.settings.onFocus=function(){i.element.triggerHandler("cbselect.focus",[i])},i.settings.onBlur=function(){i.element.triggerHandler("cbselect.blur",[i])},i.settings.onClick=function(e){e.checked?i.element.triggerHandler("cbselect.selecting",[i,e.value]):i.element.triggerHandler("cbselect.removing",[i,e.value])},i.settings.onOptgroupClick=function(t){e.each(t.children,function(n,l){t.checked?i.element.triggerHandler("cbselect.selecting",[i,e(l).val()]):i.element.triggerHandler("cbselect.removing",[i,e(l).val()])})},i.element.multipleSelect(i.settings),i.container=i.element.siblings(".ms-parent"),i.dropdown=i.container.find(".ms-drop");var f=i.dropdown.outerWidth(!1);i.dropdown.css("width","auto"==r?"auto":f>r?f:r).appendTo("body"),t(i),d&&"0px"!=d&&i.container.css("height",d),i.container.removeClass("cbTooltip cbSelect").attr("id","msid_"+i.element.attr("id")),e(window).on("resize scroll",function(){i.container.is(".ms-parent-active")&&t(i)})}else"undefined"==typeof i.settings.adaptContainerCssClass&&(i.settings.adaptContainerCssClass=function(e){return"cbTooltip"!=e&&"cbSelect"!=e?e:void 0}),g&&(i.element.attr("data-cbtooltip-open-target","#s2id_"+i.element.attr("id")),i.element.attr("data-cbtooltip-close-target","#s2id_"+i.element.attr("id")),i.element.attr("data-cbtooltip-position-target","#s2id_"+i.element.attr("id"))),i.element.select2(i.settings),i.container=i.element.select2("container"),i.dropdown=i.element.select2("dropdown"),d&&"0px"!=d&&i.container.css("height",d),i.element.on("select2-open",function(){i.element.triggerHandler("cbselect.open",[i])}).on("select2-close",function(){i.element.triggerHandler("cbselect.close",[i])}).on("select2-focus",function(){i.element.triggerHandler("cbselect.focus",[i])}).on("select2-blur",function(){i.element.triggerHandler("cbselect.blur",[i])}).on("select2-selecting",function(e){i.element.triggerHandler("cbselect.selecting",[i,e.val])}).on("select2-removing",function(e){i.element.triggerHandler("cbselect.removing",[i,e.val])});i.element.on("change",function(){"undefined"!=typeof cbParamChange&&cbParamChange.call(s)}),i.element.on("modified.cbselect",function(e,t,n){t!=n&&(i.element.cbselect("destroy"),i.element.cbselect(i.options))}),i.element.on("cloned.cbselect",function(){e(this).off("cloned.cbselect"),e(this).off("modified.cbselect"),e(this).removeData("cbselect"),g&&(e(this).removeAttr("data-cbtooltip-open-target"),e(this).removeAttr("data-cbtooltip-close-target"),e(this).removeAttr("data-cbtooltip-position-target")),"multipleselect"==i.type?(e(this).removeData("multipleSelect"),e(this).siblings(".ms-parent").remove()):(e(this).select2("close"),e(this).removeData("select2"),e(this).off(".select2"),e(this).removeClass("select2-offscreen"),e(this).siblings(".select2-container").remove()),e(this).show(),e(this).cbselect(i.options)}),i.element.triggerHandler("cbselect.init.after",[i]),i.element.data("cbselect",i),n.push(i)}}})},get:function(){var t=e(this).data("cbselect");return t?"multipleselect"==t.type?t.element.multipleSelect("getSelects"):t.element.select2("val"):null},set:function(t){var n=e(this).data("cbselect");return n?("multipleselect"==n.type?(e.isArray(t)||(t=[t]),n.element.multipleSelect("setSelects",t)):n.element.select2("val",t),l.get.call(this)):null},unset:function(t){var n=e(this).data("cbselect");if(!n)return null;e.isArray(t)||(t=[t]);var s=l.get.call(this),i=s;return e.isArray(s)?e.each(t,function(e,t){i.indexOf(t)>-1&&i.splice(i.indexOf(t),1)}):e.each(t,function(e,t){return t===s?(i="",!1):void 0}),l.set.call(this,i)},enable:function(){var t=e(this).data("cbselect");return t?("multipleselect"==t.type?t.element.multipleSelect("enable"):t.element.select2("enable",!0),!0):!1},disable:function(){var t=e(this).data("cbselect");return t?("multipleselect"==t.type?t.element.multipleSelect("disable"):t.element.select2("enable",!1),!0):!1},container:function(){var t=e(this).data("cbselect");return t?t.container:!1},dropdown:function(){var t=e(this).data("cbselect");return t?t.dropdown:!1},destroy:function(){var t=e(this).data("cbselect");return t?((t.element.hasClass("cbTooltip")||"true"==t.element.data("hascbtooltip"))&&(t.element.removeAttr("data-cbtooltip-open-target"),t.element.removeAttr("data-cbtooltip-close-target"),t.element.removeAttr("data-cbtooltip-position-target")),"multipleselect"==t.type?(t.element.removeData("multipleSelect"),t.dropdown.remove(),t.container.remove(),t.element.show()):t.element.select2("destroy"),t.element.off("cloned.cbselect"),t.element.off("modified.cbselect"),e.each(n,function(e,l){return l.element==t.element?(n.splice(e,1),!1):!0}),t.element.removeData("cbselect"),t.element.triggerHandler("cbselect.destroyed",[t]),!0):!1},instances:function(){return n}};e.fn.cbselect=function(e){return l[e]?l[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:l.init.apply(this,arguments)},e.fn.cbselect.defaults={init:!0,useData:!0,width:"calculate",height:"off",placeholder:null},e.fn.cbselect.defaults.select2={triggerChange:!0,dropdownAutoWidth:!0,closeOnSelect:!1,placeholderOption:function(){}},e.fn.cbselect.defaults.multipleselect={filter:!0,minimumCountSelected:1}}(jQuery);