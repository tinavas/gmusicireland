!function(e){var t=[],s={init:function(s){return this.each(function(){var a=this,n=e(a).data("cbdatepicker");if(!n&&(n={},n.options=s,n.defaults=e.fn.cbdatepicker.defaults,n.settings=e.extend(!0,{},n.defaults,n.options),n.strings=e.extend(!0,{},e.datepicker.regional[""],n.settings.strings),n.element=e(a),n.settings.useData&&e.each(n.defaults,function(e){if("init"!=e&&"useData"!=e){var t=n.element.data("cbdatepicker"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?n.settings[e]=t:(t=n.element.data("cbdatepicker"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(n.settings[e]=t))}}),n.element.triggerHandler("cbdatepicker.init.before",[n]),n.settings.init)){var i=(new Date).getFullYear();if(n.settings.minYear){if("string"==typeof n.settings.minYear){var r=n.settings.minYear.substr(0,1),m=n.settings.minYear.substr(1);"+"==r?n.settings.minYear=i+parseInt(m):"-"==r&&(n.settings.minYear=i-parseInt(m))}}else n.settings.minYear=i-99;if(n.settings.maxYear){if("string"==typeof n.settings.maxYear){var o=n.settings.maxYear.substr(0,1),c=n.settings.maxYear.substr(1);"+"==o?n.settings.maxYear=i+parseInt(c):"-"==o&&(n.settings.maxYear=i-parseInt(c))}}else n.settings.maxYear=i+99;if(2==n.settings.calendarType||3==n.settings.calendarType){var d=null;"undefined"!=typeof moment&&(d=moment.locale(),moment.locale(Math.random(),{months:n.strings.monthNames,monthsShort:n.strings.monthNamesShort,weekdays:n.strings.dayNames,weekdaysShort:n.strings.dayNamesShort,weekdaysMin:n.strings.dayNamesMin})),n.combodate=n.element.combodate({format:n.settings.format,template:n.settings.template,minYear:n.settings.minYear,maxYear:n.settings.maxYear,firstItem:n.settings.firstItem,smartDays:!0,yearDescending:!1,customClass:n.settings.customClass}),d&&moment.locale(d),n.element.siblings(".combodate").children().on("change",function(){var t=e(this).val();""!==t?e(this).siblings().each(function(){if(!e(this).val()){var t=null;e(this).hasClass("year")&&(t=e(this).children('option[value="'+i+'"]').val()),t||(t=e(this).children('option[value!=""]:first').val()),t&&e(this).val(t)}}):e(this).siblings().each(function(){e(this).val("")}),n.element.triggerHandler("cbdatepicker.select",[n,t])})}(1==n.settings.calendarType||n.settings.addPopup)&&(n.settings.showTime?n.datetimepicker=n.element.datetimepicker({stepMinute:5,stepSecond:1,timeFormat:n.settings.timeFormat,amNames:n.strings.amNames,pmNames:n.strings.pmNames,timeOnlyTitle:n.strings.timeOnlyTitle,timeText:n.strings.timeText,hourText:n.strings.hourText,minuteText:n.strings.minuteText,secondText:n.strings.secondText,millisecText:n.strings.millisecText,microsecText:n.strings.microsecText,timezoneText:n.strings.timezoneText,onSelect:function(e){n.settings.addPopup&&n.element.combodate("setValue",e),n.element.triggerHandler("cbdatepicker.select",[n,e])},yearRange:n.settings.minYear+":"+n.settings.maxYear,isRTL:n.settings.isRTL,firstDay:n.settings.firstDay,changeMonth:!0,changeYear:!0,showButtonPanel:!1,dateFormat:n.settings.dateFormat,dayNames:n.strings.dayNames,dayNamesMin:n.strings.dayNamesMin,dayNamesShort:n.strings.dayNamesShort,monthNames:n.strings.monthNames,monthNamesShort:n.strings.monthNamesShort,prevText:n.strings.prevText,nextText:n.strings.nextText,currentText:n.strings.currentText,closeText:n.strings.closeText}):n.datepicker=n.element.datepicker({onSelect:function(e){n.settings.addPopup&&n.element.combodate("setValue",e),n.element.triggerHandler("cbdatepicker.select",[n,e])},yearRange:n.settings.minYear+":"+n.settings.maxYear,isRTL:n.settings.isRTL,firstDay:n.settings.firstDay,changeMonth:!0,changeYear:!0,showButtonPanel:!1,dateFormat:n.settings.dateFormat,dayNames:n.strings.dayNames,dayNamesMin:n.strings.dayNamesMin,dayNamesShort:n.strings.dayNamesShort,monthNames:n.strings.monthNames,monthNamesShort:n.strings.monthNamesShort,prevText:n.strings.prevText,nextText:n.strings.nextText,currentText:n.strings.currentText,closeText:n.strings.closeText})),n.calendarHandler=function(t){t.preventDefault();var s=n.element.datepicker("widget");s.not(":visible").length&&(n.element.datepicker("show"),s.position({my:"left top+20",at:"left top",of:e(this)})),n.element.triggerHandler("cbdatepicker.calendar",[n])},n.element.siblings(".hasCalendar").on("click",n.calendarHandler),n.element.on("modified.cbdatepicker",function(e,t,s){t!=s&&(n.element.cbdatepicker("destroy"),n.element.cbdatepicker(n.options))}),n.element.on("cloned.cbdatepicker",function(){e(this).off("cloned.cbdatepicker"),e(this).off("modified.cbdatepicker"),e(this).removeData("cbdatepicker"),e(this).removeData("combodate"),e(this).removeData("datepicker"),e(this).siblings(".combodate").remove(),e(this).removeClass("hasDatepicker"),e(this).siblings(".hasCalendar").off("click",n.calendarHandler),e(this).cbdatepicker(n.options)}),n.element.triggerHandler("cbdatepicker.init.after",[n]),n.element.data("cbdatepicker",n),t.push(n)}})},destroy:function(){var s=e(this).data("cbdatepicker");return s?(s.combodate&&s.element.combodate("destroy"),s.datetimepicker&&s.element.datetimepicker("destroy"),s.datepicker&&s.element.datepicker("destroy"),s.element.siblings(".hasCalendar").off("click",s.calendarHandler),s.element.off("cloned.cbdatepicker"),s.element.off("modified.cbdatepicker"),e.each(t,function(e,a){return a.element==s.element?(t.splice(e,1),!1):!0}),s.element.removeData("cbdatepicker"),s.element.triggerHandler("cbdatepicker.destroyed",[s]),!0):!1},instances:function(){return t}};e.fn.cbdatepicker=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:s.init.apply(this,arguments)},e.fn.cbdatepicker.defaults={init:!0,useData:!0,calendarType:2,template:"Y-m-d H:i:s",format:"Y-m-d H:i:s",timeFormat:"H:i:s",dateFormat:"Y-m-d",minYear:"-99",maxYear:"+99",firstDay:0,showTime:!1,addPopup:!1,isRTL:!1,customClass:null,firstItem:"empty"}}(jQuery);