!function(e){function t(t){t.element.removeClass("cbScrollerWidth cbScrollerHeight");var i=t.element.find(".cbScrollerContent:first"),n=0,s=0,a=i.children();if(t.settings.elements&&(a=a.find(t.settings.elements)),t.settings.ignore&&(a=a.not(t.settings.ignore)),a.each(function(){n+=e(this).width(),s+=e(this).height()}),t.settings.width){var l=t.element.find(".cbScrollerLeft:first").addClass("hidden"),r=t.element.find(".cbScrollerRight:first").addClass("hidden");n>i.width()&&(t.element.addClass("cbScrollerWidth"),l.removeClass("hidden"),r.removeClass("hidden"))}if(t.settings.height){var o=t.element.find(".cbScrollerUp:first").addClass("hidden"),c=t.element.find(".cbScrollerDown:first").addClass("hidden");s>i.height()&&(t.element.addClass("cbScrollerHeight"),o.removeClass("hidden"),c.removeClass("hidden"))}}function i(t,i){if(("left"!=t&&"right"!=t||i.settings.width)&&("up"!=t&&"down"!=t||i.settings.height)){var n=i.element.find(".cbScrollerContent:first"),s=0,a=0,l=null,r=n.children();if(i.settings.elements&&(r=r.find(i.settings.elements)),i.settings.ignore&&(r=r.not(i.settings.ignore)),r.each(function(){s+=e(this).width(),a+=e(this).height()}),r.each(function(){switch(t){case"left":e(this).offset().left<n.offset().left&&(l=e(this));break;case"right":if(e(this).offset().left+e(this).width()>n.offset().left+n.width())return l=e(this),!1;break;case"up":e(this).offset().top<n.offset().top&&(l=e(this));break;case"down":if(e(this).offset().top+e(this).height()>n.offset().top+n.height())return l=e(this),!1}}),"left"==t||"right"==t)if(l)n.scrollTo(l,"fast",{axis:"x",easing:"linear"});else if(i.settings.loop){var o=s;"right"==t&&(o=0),n.scrollTo(o,0,{axis:"x",easing:"linear"})}else{var c=0;"right"==t&&(c=s),n.scrollTo(c,"fast",{axis:"x",easing:"linear"})}else if("up"==t||"down"==t)if(l)n.scrollTo(l,"fast",{axis:"y",easing:"linear"});else if(i.settings.loop){var d=a;"down"==t&&(d=0),n.scrollTo(d,0,{axis:"x",easing:"linear"})}else{var u=0;"down"==t&&(u=a),n.scrollTo(u,"fast",{axis:"y",easing:"linear"})}}}var n=[],s={init:function(s){return this.each(function(){var a=this,l=e(a).data("cbscroller");l||(l={},l.options=s,l.defaults=e.fn.cbscroller.defaults,l.settings=e.extend(!0,{},l.defaults,l.options),l.element=e(a),l.settings.useData&&e.each(l.defaults,function(e){if("init"!=e&&"useData"!=e){var t=l.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1));"undefined"!=typeof t?l.settings[e]=t:(t=l.element.data("cbscroller"+e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()),"undefined"!=typeof t&&(l.settings[e]=t))}}),l.element.triggerHandler("cbscroller.init.before",[l]),l.settings.init&&(l.resizeHandler=function(){t.call(a,l)},e(window).on("resize",l.resizeHandler),l.settings.width&&(l.leftHandler=function(e){e.preventDefault(),i.call(a,"left",l)},l.rightHandler=function(e){e.preventDefault(),i.call(a,"right",l)},l.element.find(".cbScrollerLeft:first").on("click",l.leftHandler),l.element.find(".cbScrollerRight:first").on("click",l.rightHandler)),l.settings.height&&(l.upHandler=function(e){e.preventDefault(),i.call(a,"up",l)},l.downHandler=function(e){e.preventDefault(),i.call(a,"down",l)},l.element.find(".cbScrollerUp:first").on("click",l.upHandler),l.element.find(".cbScrollerDown:first").on("click",l.downHandler)),t.call(a,l),l.element.on("cloned.cbscroller",function(){e(this).off("cloned.cbscroller"),e(this).removeData("cbscroller"),l.settings.width&&(e(this).find(".cbScrollerLeft:first").off("click",l.leftHandler).addClass("hidden"),e(this).find(".cbScrollerRight:first").off("click",l.rightHandler).addClass("hidden")),l.settings.height&&(e(this).find(".cbScrollerUp:first").off("click",l.upHandler).addClass("hidden"),e(this).find(".cbScrollerDown:first").off("click",l.downHandler).addClass("hidden")),e(this).removeClass("cbScrollerWidth cbScrollerHeight"),e(this).cbscroller(l.options)}),l.element.triggerHandler("cbscroller.init.after",[l]),l.element.data("cbscroller",l),n.push(l)))})},update:function(){var i=e(this).data("cbscroller");return i?(t.call(this,i),!0):!1},left:function(){var t=e(this).data("cbscroller");return t&&t.settings.width?(i.call(this,"left",t),!0):!1},right:function(){var t=e(this).data("cbscroller");return t&&t.settings.width?(i.call(this,"right",t),!0):!1},up:function(){var t=e(this).data("cbscroller");return t&&t.settings.height?(i.call(this,"up",t),!0):!1},down:function(){var t=e(this).data("cbscroller");return t&&t.settings.height?(i.call(this,"down",t),!0):!1},destroy:function(){var t=e(this).data("cbscroller");return t?(t.element.off("cloned.cbscroller"),e(window).off("resize",t.resizeHandler),t.settings.width&&(t.element.find(".cbScrollerLeft:first").off("click",t.leftHandler).addClass("hidden"),t.element.find(".cbScrollerRight:first").off("click",t.rightHandler).addClass("hidden")),t.settings.height&&(t.element.find(".cbScrollerUp:first").off("click",t.upHandler).addClass("hidden"),t.element.find(".cbScrollerDown:first").off("click",t.downHandler).addClass("hidden")),t.element.removeClass("cbScrollerWidth cbScrollerHeight"),t.element.removeData("cbscroller"),t.element.triggerHandler("cbscroller.destroyed",[t]),!0):!1},instances:function(){return n}};e.fn.cbscroller=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:s.init.apply(this,arguments)},e.fn.cbscroller.defaults={init:!0,useData:!0,elements:null,ignore:null,width:!0,height:!0,loop:!1}}(jQuery);